(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["e1e25b62"],{"47b2":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mypage"},[n("TitleBar",{attrs:{titleTx:t.title}}),n("div",{staticClass:"iv-block"},[n("span",{staticClass:"iv-tt-gray",staticStyle:{color:"#333333","margin-top":"10px"}},[t._v(t._s(t.$t("quickbuy"))+":")]),n("div",{staticStyle:{"margin-top":"10px"}},[n("q-btn",{staticStyle:{color:"#3587F2","margin-left":"10px"},attrs:{outline:"",label:"1 ETH"},on:{click:function(e){t.buy("1")}}}),n("q-btn",{staticStyle:{color:"#3587F2","margin-left":"10px"},attrs:{outline:"",label:"3 ETH"},on:{click:function(e){t.buy("3")}}}),n("q-btn",{staticStyle:{color:"#3587F2","margin-left":"10px"},attrs:{outline:"",label:"5 ETH"},on:{click:function(e){t.buy("5")}}}),n("q-btn",{staticStyle:{color:"#3587F2","margin-left":"10px"},attrs:{outline:"",label:"10 ETH"},on:{click:function(e){t.buy("10")}}})],1),n("span",{staticClass:"iv-tt-gray",staticStyle:{color:"black","margin-top":"10px"}},[t._v(t._s(t.$t("customamt"))+":")]),n("q-input",{staticClass:"in-in-ma",attrs:{"float-label":t.$t("ivamt"),type:"number"},model:{value:t.toAmt,callback:function(e){t.toAmt=e},expression:"toAmt"}}),t.global.user.hadrefer?t._e():n("q-input",{staticClass:"in-in-ma",attrs:{"float-label":t.$t("fillreferCode")},model:{value:t.refercode,callback:function(e){t.refercode=e},expression:"refercode"}}),n("q-btn",{staticClass:"btn-next",attrs:{rounded:"",label:t.$t("buy"),color:"primary"},on:{click:t.toNext}}),n("span",{staticClass:"iv-tt-gray",staticStyle:{color:"dodgerblue"},on:{click:t.toInvestReadme}},[n("u",[t._v(t._s(t.$t("lookgg")))])]),t._e()],1)],1)},i=[];s._withStripped=!0;n("96cf");var o=n("c973"),a=n.n(o),l=(n("f559"),n("9bfb")),r=n("e7ea"),c=(n("a002"),n("96a1")),u=n("f5ef"),h=(n("3452"),{components:{TitleBar:l["a"]},data:function(){return{currentBalance:this.global.wallet.lastEthbalance,title:this.$t("joininv"),toAddress:"",toAmt:"",investBmobId:"",investAmt:"",lastInverstTime:1e3*parseInt(this.global.user._lastinvestTime),refercode:""}},mounted:function(){},methods:{toInvestReadme:function(){this.$router.push("/withdrawreadme")},toNext:function(){var t=this,e=this;console.log("----invest 1"),(new Date).getTime()-this.lastInverstTime<1e3*parseInt(this.global.cmatconfig._investInterval)?toast(this.$t("buy24once")):(console.log("----invest 2"),this.toAmt>=this.global.bmobconfig.minPerInvest&&this.toAmt<=this.global.bmobconfig.maxPerInvest?(console.log("----invest 3"),this.toAmt>this.global.wallet.lastEthbalance?toast(this.$t("ethnotenough")):(this.global.wallet.lastEthbalance-this.toAmt<.001&&toast(this.$t("gasfeeless")),this.toAmt*(this.global.cmatconfig.handlingFee/1e4)/this.global.cmatconfig.mcoinPrice>this.global.wallet.lastMcoinBalance?this.$q.dialog({title:"",message:this.$t("cmatless"),ok:this.$t("ok"),cancel:this.$t("cancel")}).then(function(){e.$router.push({path:"/ethtransfer",query:{p1:"CGAS",p2:t.global.wallet.lastMcoinBalance}})}).catch(function(){}):(this.investAmt=this.toAmt,this.global.user.hadrefer?this.showPswdInputDialog():this.checkreferCode()))):toast(this.$t("singleinv",{min:this.global.bmobconfig.minPerInvest,max:this.global.bmobconfig.maxPerInvest})))},checkreferCode:function(){this.refercode.startsWith("0x")?toast(this.$t("onlyrefercode")):this.getAddress(this.refercode)},getAddress:function(t){var e=this;e.$q.loading.show({message:this.$t("checking"),spinnerSize:50});var n=function(){var n=a()(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.global.nabContract.getAddress(t.toLowerCase());case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},n,this)}));return function(){return n.apply(this,arguments)}}();n().then(function(t){if(t=t.toLowerCase(),t!==e.global.emptyAddress){if(t===e.global.wallet.ethAddress)return e.$q.loading.hide(),void toast(e.$t("canntrefself"));e.referAddress=t,e._recycleCheckTimes=0,e.recycleReselfCheck(t)}else e.$q.loading.hide(),toast(e.$t("invalidcode"))})},recycleReselfCheck:function(t){var e=this,n=this,s=function(){var s=a()(regeneratorRuntime.mark(function s(){return regeneratorRuntime.wrap(function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,n.global.m3gameContract.refermap(e.global.contractConfig.tokenAddress,t);case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},s,this)}));return function(){return s.apply(this,arguments)}}();s().then(function(t){if(t!==n.global.emptyAddress){if(t.toLowerCase()===n.global.wallet.ethAddress)return n.$q.loading.hide(),void toast(n.$t("recyclereferself"));n._recycleCheckTimes++,n._recycleCheckTimes>n.global.bmobconfig.recycleCheckTimes?(n.$q.loading.hide(),n.showPswdInputDialog()):n.recycleReselfCheck(t.toLowerCase())}else n.$q.loading.hide(),n.showPswdInputDialog()})},buy:function(t){this.toAmt=t},showPswdInputDialog:function(){var t=this,e=this;this.$q.dialog({title:this.itmeName1,message:this.$t("enterpswd"),prompt:{model:"",type:"text"},ok:this.$t("ok"),cancel:this.$t("cancel"),color:"secondary"}).then(function(n){if(""===n)toast(e.$t("pswdnull"));else{e.$q.loading.show({message:e.$t("txsubmiting"),spinnerSize:50});var s=e.util.getWallet(e,n);t.doInvest(s)}}).catch(function(){})},doInvest:function(t){var e=this,n=this,s=this.global.m3gameContract.connect(t),i={value:r["ethers"].utils.parseEther(this.investAmt+"")};console.log("----invest 4"),s.referAndInvestOnce(this.referAddress,this.global.contractConfig.tokenAddress,i).then(function(t){console.log(t),n.$q.loading.hide(),n.util.showInfoDialog(n,t.hash,!0),n.util.listen4TxResult(n,t.hash,n.$t("investsuccess"),n.$t("investfail"),function(){n.lastInverstTime=(new Date).getTime(),u["a"].$emit("investSuccess")})}).catch(function(t){n.util.reprotError2Bmob(n,"referAndInvestOnce",t,e.referAddress+","+e.global.contractConfig.tokenAddress+","+i.value),n.$q.loading.hide()})},itemClick:function(t){switch(t){case 0:"0"!==this.global.bmobconfig.app1url?Object(c["a"])(this.global.bmobconfig.app1url):toast("Coming soon");break;case 1:"0"!==this.global.bmobconfig.app2url?Object(c["a"])(this.global.bmobconfig.app2url):toast("Coming soon");break;case 2:"0"!==this.global.bmobconfig.app3url?Object(c["a"])(this.global.bmobconfig.app3url):toast("Coming soon");break;case 3:"0"!==this.global.bmobconfig.app4url?Object(c["a"])(this.global.bmobconfig.app4url):toast("Coming soon");break}}},beforeDestroy:function(){this.$q.loading.hide()}}),f=h,b=(n("8048"),n("2877")),g=Object(b["a"])(f,s,i,!1,null,"50727336",null);g.options.__file="Invest.vue";e["default"]=g.exports},5461:function(t,e,n){},8048:function(t,e,n){"use strict";var s=n("5461"),i=n.n(s);i.a},"9bfb":function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title-bar"},[n("q-icon",{staticClass:"title-back-icon",attrs:{name:"navigate_before"},nativeOn:{click:function(e){return t.goBack(e)}}}),n("div",{staticClass:"title-tx"},[t._v(t._s(t.titleTx))])],1)},i=[];s._withStripped=!0;var o={props:["titleTx"],methods:{goBack:function(){this.$router.go(-1)}}},a=o,l=(n("a675"),n("2877")),r=Object(l["a"])(a,s,i,!1,null,null,null);r.options.__file="TitleBar.vue";e["a"]=r.exports},a675:function(t,e,n){"use strict";var s=n("ca51"),i=n.n(s);i.a},ca51:function(t,e,n){},f5ef:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var s=n("2b0e"),i=new s["a"]}}]);